# CONTRIBUTING.md

Спасибо, что хотите внести вклад в Rarog — мы очень ценим ваше время и усилия.

Этот документ объясняет процесс внесения изменений, правила кодирования, требования к PR и релизам, а также процедуру общения. Следуйте инструкциям ниже, чтобы сделать процесс простым, предсказуемым и удобным для всех участников.

---

## Содержание

1. Быстрый старт
2. Кодекс поведения
3. Как предложить идею или баг-репорт
4. Как сделать pull request (PR)
5. Правила коммитов и формат сообщений
6. Кодстайл и линтеры
7. Тесты и CI
8. Работа с зависимостями
9. Релизы и версияция
10. Безопасность
11. Вопросы по лицензированию и юридические вопросы
12. Благодарности

---

## 1. Быстрый старт

1. Fork репозиторий `https://github.com/TheSkiF4er/rarog`.
2. Клонируйте на локальную машину: `git clone https://github.com/TheSkiF4er/rarog.git`.
3. Переключитесь в каталог и установите зависимости: `pnpm install`.
4. Создайте ветку для вашей задачи по шаблону: `git checkout -b feat/<короткое-описание>` или `fix/<короткое-описание>`.
5. Доработайте код, запустите тесты и линтер: `pnpm -w run test && pnpm -w run lint`.
6. Откройте PR в основной репозиторий с описанием изменений.

Если вы хотите внести небольшой правочный PR (например, исправление опечатки), можно работать прямо в GitHub UI.

---

## 2. Кодекс поведения

Мы руководствуемся принципами уважения и инклюзивности. Пожалуйста, ознакомьтесь с `CODE_OF_CONDUCT.md`. Любое оскорбительное поведение не допускается и может привести к удалению участника из проекта.

---

## 3. Как предложить идею или баг-репорт

### Баги

* Используйте шаблон `Bug report` при создании issue.
* Указывайте:

  * Описание проблемы
  * Шаги для воспроизведения (минимально — POC)
  * Ожидаемое и фактическое поведение
  * Версии пакетов (`pnpm list --depth 0`)
  * Окружение (OS, Node.js, браузер)
  * Логи/скриншоты, если есть

### Фичи

* Для новых фич создавайте issue с меткой `enhancement`.
* Предлагайте дизайн/использование и укажите, почему это улучшит проект.
* При возможности прикладывайте макеты, варианты API и обратную совместимость.

---

## 4. Как сделать pull request (PR)

1. Убедитесь, что вы создали issue, если изменение не тривиальное. Ссылка на issue в PR обязательна.
2. Ветку именуйте по шаблону `feat/`, `fix/`, `chore/`, `docs/`, `test/` и т.д.:

   * `feat/new-theme-generator`
   * `fix/modal-focus-trap`
3. Протестируйте локально: `pnpm -w run build && pnpm -w run test`.
4. Запушьте ветку: `git push origin <branch>` и откройте PR в `main`.
5. PR должно содержать:

   * Краткое описание (первые 1–2 предложения)
   * Подробное описание изменений
   * Ссылки на issue
   * Скриншоты / GIF-демо при визуальных изменениях
   * Инструкции для проверки
6. Укажите, какие пакеты/сервисы могут быть затронуты и тесты, которые следует выполнить при ревью.

**Автоматические проверки:** все PR проходят CI (lint, build, тесты, security scan). PR не пройдет merge, пока все обязательные проверки не будут успешны.

---

## 5. Правила коммитов и формат сообщений

Мы используем **Conventional Commits** для автоматической генерации changelog и semantic-release:

* Формат: `<type>(<scope>): <subject>`
* Типы: `feat`, `fix`, `docs`, `style`, `refactor`, `perf`, `test`, `chore`, `build`, `ci`

Примеры:

* `feat(core): add responsive utility u-grid-cols-6`
* `fix(modal): restore focus trapping in Safari`
* `docs(contributing): update PR template`

Используйте `commitizen` или `pnpm -w run commit` (если настроено) для удобства. Обязательно пишите подробные тела коммитов, если изменение не тривиально.

---

## 6. Кодстайл и линтеры

* JS/TS: ESLint с конфигом в корне (`.eslintrc.cjs`).
* SCSS/CSS: Stylelint с правилами и Prettier для форматирования.
* Форматирование: Prettier. Запуск: `pnpm -w run format`.
* Хуки: `husky` + `lint-staged` для автоматической проверки staged-файлов перед коммитом.

Соблюдайте правила: семантический нейминг, небольшие функции, читаемость, комментарии там, где логика нетривиальна.

---

## 7. Тесты и CI

* Юнит/интеграционные тесты: `vitest` / `jest` (в зависимости от пакета). Запуск: `pnpm -w run test`.
* E2E/визуальные: Playwright / Puppeteer + Percy (опционально).
* Accessibility checks: axe-core в CI для ключевых страниц и компонентов.
* PR триггерит CI pipeline в `.github/workflows/ci.yml`:

  * Установка зависимостей
  * Линтинг и форматирование
  * Сборка пакетов
  * Тесты
  * Security scans

Разработка должна включать тесты для исправляемых багов и новых фич.

---

## 8. Работа с зависимостями

* Используем `pnpm` и lockfile (`pnpm-lock.yaml`) — не редактируйте вручную.
* Dependabot/renovate автоматически открывает PR на обновления.
* При обновлении major‑версий обязательно проверить обратную совместимость и добавить инструкции в release notes.

---

## 9. Релизы и версияция

Мы используем `semantic-release` и `Conventional Commits` для автоматизации релизов.

* Коммиты с правильными типами автоматически генерируют changelog и версию.
* Релизы публикуются в npm под scope `@rarog/*` и создают GitHub Release.
* Для ручной публикации следуйте инструкции в `RELEASE.md` (если есть): тесты → сборки → публикация.

---

## 10. Безопасность

* Уязвимости — сообщать через `security@cajeer.ru` или GitHub Security Advisory.
* Не включайте секреты в PR. Если секрет случайно попал в репозиторий — сообщите немедленно и удалите историю.
* Все CI image сканируются Trivy/Snyk. PR с уязвимыми зависимостями помечаются и требуют апдейта.

(Полная политика в `SECURITY.md`.)

---

## 11. Вопросы по лицензированию и юридические вопросы

Rarog распространяется под лицензией Apache‑2.0. Все внешние вклады подразумевают согласие с этой лицензией — подпись отдельного CLA не требуется, если иное не оговорено.

Если вы представляете юридическое лицо и нужно оформить contributor license agreement — свяжитесь с maintainers.

---

## 12. Благодарности

Мы благодарим каждого, кто помогает улучшать Rarog — будь то баг-репорты, правки в документации или код. Все участники будут упомянуты в `AUTHORS.md` или `HALL_OF_FAME` по согласованию.
