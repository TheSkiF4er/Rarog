// Rarog — Dual Token Grid
// Файл: packages/core/src/tokens/index.scss
// Назначение: централизованный набор SCSS/CSS-переменных (tokens) для Rarog
// Подход: Dual Token Grid -> Force Tokens (поведение/физика) + Skin Tokens (визуал)
// Автор: TheSkiF4er
// Лицензия: Apache-2.0

// -------------------------
// Инструкции
// -------------------------
// Этот файл служит точкой входа для всех theme-токенов.
// 1) В development-окружении вы можете редактировать значения здесь.
// 2) В production лучше генерировать эквивалентный CSS (:root { --var: ... }) через scripts/generate-theme.js
// 3) Переопределяйте переменные на уровне проекта (custom theme) — простым присвоением в :root

// -------------------------
// FORCE TOKENS — характеризуют поведение/характер UI
// (плотность, импульс, масса, напряжение и т.д.)
// Используйте префикс --force-
// -------------------------
:root {
  /* Плотность интерфейса — количественная шкала, влияет на spacing и размеры */
  --force-dens-1: 0.6; /* сверхвоздушный */
  --force-dens-2: 0.85; /* лёгкий */
  --force-dens-3: 1; /* стандарт */
  --force-dens-4: 1.15; /* компактный */
  --force-dens-5: 1.3; /* плотный */

  /* Импульс — влияет на анимационные скорости и отклик */
  --force-imp-1: 0.6; /* медленный */
  --force-imp-2: 0.85; /* спокойный */
  --force-imp-3: 1; /* стандарт */
  --force-imp-4: 1.15; /* быстрый */
  --force-imp-5: 1.4; /* резкий */

  /* Масса — относительная тяжесть элементов (влияет на shadow/press behaviour) */
  --force-mass-light: 0.6;
  --force-mass-regular: 1;
  --force-mass-heavy: 1.4;

  /* Напряжение — влияет на упругость анимаций */
  --force-tens-soft: 0.6;
  --force-tens-regular: 1;
  --force-tens-hard: 1.28;
}

// -------------------------
// SKIN TOKENS — визуальные токены (цвета, глубина, текстура, свечение)
// Используйте префикс --skin- или более семантические --tone-, --depth-, --glow-
// -------------------------
:root {
  /* Цветовые тона (хранятся в формате "R G B" — удобнее для rgb(var(--...))) */
  --tone-primary: 30 120 255;
  --tone-secondary: 96 132 255;
  --tone-success: 16 185 129;
  --tone-danger: 220 38 38;
  --tone-warning: 245 158 11;

  /* Surface / on-surface (text on surface) */
  --tone-surface: 255 255 255;
  --tone-on-surface: 18 18 20;
  --tone-muted-surface: 250 250 252;
  --tone-on-muted: 34 34 34;

  /* Depth tokens (влияют на тени и elevation) */
  --depth-1: 0.04; // лёгкая
  --depth-2: 0.06;
  --depth-3: 0.08;

  /* Glow / highlight intensity (0..1) */
  --glow-0: 0;
  --glow-1: 0.08;
  --glow-2: 0.14;
  --glow-3: 0.22;

  /* Texture / subtle overlay — используется в ::before layers */
  --tex-1: 0.02; // практически невидимая
  --tex-2: 0.04;

  /* Radius scale */
  --r-radius-xs: 6px;
  --r-radius-sm: 8px;
  --r-radius-md: 12px;
  --r-radius-lg: 16px;
  --r-radius-pill: 9999px;

  /* Spacing baseline (semantic sizes) */
  --r-spacing-s0: 0px;
  --r-spacing-s1: 4px;
  --r-spacing-s2: 8px;
  --r-spacing-s3: 12px;
  --r-spacing-s4: 16px;
  --r-spacing-s5: 20px;
  --r-spacing-s6: 24px;
  --r-spacing-s7: 32px;

  /* Typography tokens */
  --font-family-system: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --font-size-sm: 0.85rem;
  --font-size-md: 0.95rem;
  --font-size-lg: 1.05rem;
  --font-weight-regular: 400;
  --font-weight-strong: 600;

  /* Motion tokens (base durations in ms) — масштабируются через force-imp */
  --motion-fast: 120ms;
  --motion-medium: 200ms;
  --motion-slow: 360ms;
}

// -------------------------
// Semantic aliases — удобные переменные для компонентов
// -------------------------
:root {
  /* Buttons */
  --btn-radius: var(--r-radius-md);
  --btn-padding-y: calc(var(--r-spacing-s2) * 0.9);
  --btn-padding-x: calc(var(--r-spacing-s4) * 1);

  /* Card */
  --card-radius: var(--r-radius-md);
  --card-padding: var(--r-spacing-s3);

  /* Modal */
  --modal-max-width: 900px;
  --modal-backdrop: var(--tone-backdrop, 10 12 16);

  /* Toast / Notifications */
  --toast-gap: var(--r-spacing-s3);
}

// -------------------------
// Mixins & helpers (SCSS-side) — облегчают использование токенов в SCSS
// -------------------------
@function rgb-var($name) {
  // Возвращает: rgb(var(--#{$name}))
  @return unquote('rgb(var(--' + $name + '))');
}

@function rgb-var-a($name, $alpha: 1) {
  // Возвращает rgba для CSS custom property, где property содержит "R G B"
  // пример: rgba(var(--tone-primary), 0.08)
  @return unquote('rgba(var(--' + $name + '), ' + $alpha + ')');
}

@mixin tone-color($name) {
  color: rgb-var(#{$name});
}

@mixin bg-tone($name) {
  background-color: rgb-var(#{$name});
}

@mixin box-elevation($level: 1) {
  @if $level == 1 {
    box-shadow: 0 6px 18px rgba(9,30,66, var(--depth-1));
  } @else if $level == 2 {
    box-shadow: 0 10px 28px rgba(9,30,66, var(--depth-2));
  } @else {
    box-shadow: 0 18px 48px rgba(9,30,66, var(--depth-3));
  }
}

@mixin transition($prop: all, $speed: var(--motion-medium)) {
  transition: $prop $speed cubic-bezier(.2,.9,.3,1);
}

// scale motion by impulse token (JS side could compute; here provide helpers for common cases)
@mixin motion-scale($base-duration, $imp: 1) {
  // $imp — число, умножается на базовую длительность
  transition-duration: $base-duration * $imp;
}

// -------------------------
// Utilities — small components that may be used directly
// -------------------------
.r-token-demo {
  font-family: var(--font-family-system);
  display: grid;
  gap: var(--r-spacing-s3);
}

.r-token-row {
  display: flex;
  gap: var(--r-spacing-s3);
  align-items: center;
}

.r-token-swatch {
  width: 40px;
  height: 24px;
  border-radius: 6px;
  border: 1px solid rgba(0,0,0,0.04);
}

// -------------------------
// Compatibility / Safety
// -------------------------
// Provide fallback values for older browsers that don't support CSS variables
// (SCSS cannot polyfill CSS variables fully; это best-effort)

$fallback-primary: #1e78ff;
$fallback-surface: #ffffff;

.r-fallback-primary { background-color: $fallback-primary; }
.r-fallback-surface { background-color: $fallback-surface; }

// -------------------------
// Документация в CSS: mapping between Dual Token Grid and practical variables
// -------------------------
/*
  Dual Token Grid examples:
    - dens-3 => spacing scale uses var(--force-dens-3)
    - imp-4  => faster transitions: transition-duration = var(--motion-medium) * var(--force-imp-4)
    - skin-glow => box-shadow uses var(--glow-2)
*/

// -------------------------
// Конец файла
// -------------------------
