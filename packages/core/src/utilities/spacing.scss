// Rarog — spacing.scss
// Файл: packages/core/src/utilities/spacing.scss
// Описание: универсальные утилиты отступов и сетки пространства для Rarog.
// Подход: вместо классического spacing-scale мы используем систему плотности (force-dens)
// и семантические переменные (r-spacing-s*). Утилиты масштабируются через --force-dens-*.
// Автор: TheSkiF4er
// Лицензия: Apache-2.0

// -------------------------
// Предварительные переменные / фоллбеки
// -------------------------
:root {
  /* базовая шкала (может переопределяться generate-theme) */
  --r-spacing-s0: 0px;
  --r-spacing-s1: 4px;
  --r-spacing-s2: 8px;
  --r-spacing-s3: 12px;
  --r-spacing-s4: 16px;
  --r-spacing-s5: 20px;
  --r-spacing-s6: 24px;
  --r-spacing-s7: 32px;

  /* плотность интерфейса (force tokens) — используйте один из force-dens-* в :root конкретной темы */
  --force-dens: 1; /* по умолчанию 1 (соответствует force-dens-3 логически) */
}

// SCSS helper: вычисляем значение spacing с учётом плотности
@function _scaled-spacing($var-name) {
  // возвращаем calc(var(--r-spacing-sX) * var(--force-dens)) — но в CSS
  @return unquote('calc(var(--' + $var-name + ') * var(--force-dens))');
}

// -------------------------
// Utility mixins (SCSS-side) — удобны для reuse
// -------------------------
@mixin space-x($size) {
  margin-left: _scaled-spacing($size);
}

@mixin space-y($size) {
  margin-top: _scaled-spacing($size);
}

// -------------------------
// Layout helpers: stack / flow
// -------------------------
// .r-stack — вертикальный стек с контролируемым gap
.r-stack {
  display: block;
  > * + * {
    margin-top: _scaled-spacing('r-spacing-s3');
  }
}

// модификатор dens-* переключает gap
.r-stack.dens-1 > * + * { margin-top: _scaled-spacing('r-spacing-s2'); }
.r-stack.dens-2 > * + * { margin-top: _scaled-spacing('r-spacing-s3'); }
.r-stack.dens-3 > * + * { margin-top: _scaled-spacing('r-spacing-s4'); }
.r-stack.dens-4 > * + * { margin-top: _scaled-spacing('r-spacing-s5'); }
.r-stack.dens-5 > * + * { margin-top: _scaled-spacing('r-spacing-s6'); }

// .r-flow — направление потока: row / col
.r-flow {
  display: flex;
  gap: _scaled-spacing('r-spacing-s3');
  align-items: center;
}
.r-flow--row { flex-direction: row; }
.r-flow--col { flex-direction: column; }

// gap modifiers: flow-gap-{s1..s7}
@for $i from 0 through 7 {
  $name: 'r-spacing-s' + $i;
  .r-flow--gap-#{$i} { gap: _scaled-spacing($name); }
}

// inline helpers: u-gap-x, u-gap-y accept scale names
.u-gap-x-0 { column-gap: _scaled-spacing('r-spacing-s0'); }
.u-gap-x-1 { column-gap: _scaled-spacing('r-spacing-s1'); }
.u-gap-x-2 { column-gap: _scaled-spacing('r-spacing-s2'); }
.u-gap-x-3 { column-gap: _scaled-spacing('r-spacing-s3'); }
.u-gap-x-4 { column-gap: _scaled-spacing('r-spacing-s4'); }
.u-gap-x-5 { column-gap: _scaled-spacing('r-spacing-s5'); }
.u-gap-x-6 { column-gap: _scaled-spacing('r-spacing-s6'); }
.u-gap-x-7 { column-gap: _scaled-spacing('r-spacing-s7'); }

.u-gap-y-0 { row-gap: _scaled-spacing('r-spacing-s0'); }
.u-gap-y-1 { row-gap: _scaled-spacing('r-spacing-s1'); }
.u-gap-y-2 { row-gap: _scaled-spacing('r-spacing-s2'); }
.u-gap-y-3 { row-gap: _scaled-spacing('r-spacing-s3'); }
.u-gap-y-4 { row-gap: _scaled-spacing('r-spacing-s4'); }
.u-gap-y-5 { row-gap: _scaled-spacing('r-spacing-s5'); }
.u-gap-y-6 { row-gap: _scaled-spacing('r-spacing-s6'); }
.u-gap-y-7 { row-gap: _scaled-spacing('r-spacing-s7'); }

// -------------------------
// Spacing shorthand utilities: padding & margin (semantic)
// u-p-<axis>-<size>
// -------------------------
// padding
.u-p-0 { padding: _scaled-spacing('r-spacing-s0') !important; }
.u-p-1 { padding: _scaled-spacing('r-spacing-s1') !important; }
.u-p-2 { padding: _scaled-spacing('r-spacing-s2') !important; }
.u-p-3 { padding: _scaled-spacing('r-spacing-s3') !important; }
.u-p-4 { padding: _scaled-spacing('r-spacing-s4') !important; }
.u-p-5 { padding: _scaled-spacing('r-spacing-s5') !important; }
.u-p-6 { padding: _scaled-spacing('r-spacing-s6') !important; }
.u-p-7 { padding: _scaled-spacing('r-spacing-s7') !important; }

.u-pt-0 { padding-top: _scaled-spacing('r-spacing-s0') !important; }
.u-pt-1 { padding-top: _scaled-spacing('r-spacing-s1') !important; }
.u-pt-2 { padding-top: _scaled-spacing('r-spacing-s2') !important; }
.u-pt-3 { padding-top: _scaled-spacing('r-spacing-s3') !important; }
.u-pt-4 { padding-top: _scaled-spacing('r-spacing-s4') !important; }
.u-pt-5 { padding-top: _scaled-spacing('r-spacing-s5') !important; }
.u-pt-6 { padding-top: _scaled-spacing('r-spacing-s6') !important; }
.u-pt-7 { padding-top: _scaled-spacing('r-spacing-s7') !important; }

.u-pr-0 { padding-right: _scaled-spacing('r-spacing-s0') !important; }
.u-pr-1 { padding-right: _scaled-spacing('r-spacing-s1') !important; }
.u-pr-2 { padding-right: _scaled-spacing('r-spacing-s2') !important; }
.u-pr-3 { padding-right: _scaled-spacing('r-spacing-s3') !important; }
.u-pr-4 { padding-right: _scaled-spacing('r-spacing-s4') !important; }
.u-pr-5 { padding-right: _scaled-spacing('r-spacing-s5') !important; }
.u-pr-6 { padding-right: _scaled-spacing('r-spacing-s6') !important; }
.u-pr-7 { padding-right: _scaled-spacing('r-spacing-s7') !important; }

.u-pb-0 { padding-bottom: _scaled-spacing('r-spacing-s0') !important; }
.u-pb-1 { padding-bottom: _scaled-spacing('r-spacing-s1') !important; }
.u-pb-2 { padding-bottom: _scaled-spacing('r-spacing-s2') !important; }
.u-pb-3 { padding-bottom: _scaled-spacing('r-spacing-s3') !important; }
.u-pb-4 { padding-bottom: _scaled-spacing('r-spacing-s4') !important; }
.u-pb-5 { padding-bottom: _scaled-spacing('r-spacing-s5') !important; }
.u-pb-6 { padding-bottom: _scaled-spacing('r-spacing-s6') !important; }
.u-pb-7 { padding-bottom: _scaled-spacing('r-spacing-s7') !important; }

.u-pl-0 { padding-left: _scaled-spacing('r-spacing-s0') !important; }
.u-pl-1 { padding-left: _scaled-spacing('r-spacing-s1') !important; }
.u-pl-2 { padding-left: _scaled-spacing('r-spacing-s2') !important; }
.u-pl-3 { padding-left: _scaled-spacing('r-spacing-s3') !important; }
.u-pl-4 { padding-left: _scaled-spacing('r-spacing-s4') !important; }
.u-pl-5 { padding-left: _scaled-spacing('r-spacing-s5') !important; }
.u-pl-6 { padding-left: _scaled-spacing('r-spacing-s6') !important; }
.u-pl-7 { padding-left: _scaled-spacing('r-spacing-s7') !important; }

// margin
.u-m-0 { margin: _scaled-spacing('r-spacing-s0') !important; }
.u-m-1 { margin: _scaled-spacing('r-spacing-s1') !important; }
.u-m-2 { margin: _scaled-spacing('r-spacing-s2') !important; }
.u-m-3 { margin: _scaled-spacing('r-spacing-s3') !important; }
.u-m-4 { margin: _scaled-spacing('r-spacing-s4') !important; }
.u-m-5 { margin: _scaled-spacing('r-spacing-s5') !important; }
.u-m-6 { margin: _scaled-spacing('r-spacing-s6') !important; }
.u-m-7 { margin: _scaled-spacing('r-spacing-s7') !important; }

.u-mt-0 { margin-top: _scaled-spacing('r-spacing-s0') !important; }
.u-mt-1 { margin-top: _scaled-spacing('r-spacing-s1') !important; }
.u-mt-2 { margin-top: _scaled-spacing('r-spacing-s2') !important; }
.u-mt-3 { margin-top: _scaled-spacing('r-spacing-s3') !important; }
.u-mt-4 { margin-top: _scaled-spacing('r-spacing-s4') !important; }
.u-mt-5 { margin-top: _scaled-spacing('r-spacing-s5') !important; }
.u-mt-6 { margin-top: _scaled-spacing('r-spacing-s6') !important; }
.u-mt-7 { margin-top: _scaled-spacing('r-spacing-s7') !important; }

.u-mr-0 { margin-right: _scaled-spacing('r-spacing-s0') !important; }
.u-mr-1 { margin-right: _scaled-spacing('r-spacing-s1') !important; }
.u-mr-2 { margin-right: _scaled-spacing('r-spacing-s2') !important; }
.u-mr-3 { margin-right: _scaled-spacing('r-spacing-s3') !important; }
.u-mr-4 { margin-right: _scaled-spacing('r-spacing-s4') !important; }
.u-mr-5 { margin-right: _scaled-spacing('r-spacing-s5') !important; }
.u-mr-6 { margin-right: _scaled-spacing('r-spacing-s6') !important; }
.u-mr-7 { margin-right: _scaled-spacing('r-spacing-s7') !important; }

.u-mb-0 { margin-bottom: _scaled-spacing('r-spacing-s0') !important; }
.u-mb-1 { margin-bottom: _scaled-spacing('r-spacing-s1') !important; }
.u-mb-2 { margin-bottom: _scaled-spacing('r-spacing-s2') !important; }
.u-mb-3 { margin-bottom: _scaled-spacing('r-spacing-s3') !important; }
.u-mb-4 { margin-bottom: _scaled-spacing('r-spacing-s4') !important; }
.u-mb-5 { margin-bottom: _scaled-spacing('r-spacing-s5') !important; }
.u-mb-6 { margin-bottom: _scaled-spacing('r-spacing-s6') !important; }
.u-mb-7 { margin-bottom: _scaled-spacing('r-spacing-s7') !important; }

.u-ml-0 { margin-left: _scaled-spacing('r-spacing-s0') !important; }
.u-ml-1 { margin-left: _scaled-spacing('r-spacing-s1') !important; }
.u-ml-2 { margin-left: _scaled-spacing('r-spacing-s2') !important; }
.u-ml-3 { margin-left: _scaled-spacing('r-spacing-s3') !important; }
.u-ml-4 { margin-left: _scaled-spacing('r-spacing-s4') !important; }
.u-ml-5 { margin-left: _scaled-spacing('r-spacing-s5') !important; }
.u-ml-6 { margin-left: _scaled-spacing('r-spacing-s6') !important; }
.u-ml-7 { margin-left: _scaled-spacing('r-spacing-s7') !important; }

// -------------------------
// Responsive variants (mobile-first) — sm, md, lg breakpoints
// -------------------------
$sm: 640px;
$md: 768px;
$lg: 1024px;

@media (min-width: $sm) {
  .sm\:u-p-1 { padding: _scaled-spacing('r-spacing-s1') !important; }
  .sm\:u-p-2 { padding: _scaled-spacing('r-spacing-s2') !important; }
  .sm\:u-p-3 { padding: _scaled-spacing('r-spacing-s3') !important; }
}
@media (min-width: $md) {
  .md\:u-p-1 { padding: _scaled-spacing('r-spacing-s1') !important; }
  .md\:u-p-2 { padding: _scaled-spacing('r-spacing-s2') !important; }
  .md\:u-p-3 { padding: _scaled-spacing('r-spacing-s3') !important; }
}
@media (min-width: $lg) {
  .lg\:u-p-1 { padding: _scaled-spacing('r-spacing-s1') !important; }
  .lg\:u-p-2 { padding: _scaled-spacing('r-spacing-s2') !important; }
  .lg\:u-p-3 { padding: _scaled-spacing('r-spacing-s3') !important; }
}

// -------------------------
// Helpers: inline utilities for common compositions
// -------------------------
.u-stack-center { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: _scaled-spacing('r-spacing-s3'); }
.u-row-center { display: flex; justify-content: center; align-items: center; gap: _scaled-spacing('r-spacing-s3'); }

// spacer element
.r-spacer { flex: 1 1 auto; min-width: 0; }

// -------------------------
// Prefers-reduced-motion
// -------------------------
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; }
}

// -------------------------
// Конец файла — комментарии:
// - Для изменения базовой плотности установите в :root конкретную переменную --force-dens
//   (например: :root { --force-dens: var(--force-dens-3); })
// - Генератор темы может подставлять значения --r-spacing-s* и набор --force-dens-* для быстрой смены характера UI
// -------------------------
